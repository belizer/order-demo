<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.belizer.order.mapper.OrderMapper">

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, order_num, user_num, prod_num, prod_name, order_time, order_status
    </sql>

    <!-- 保存订单 -->
    <insert id="insert" parameterType="com.belizer.order.entity.Order" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO t_order (order_num, user_num, prod_num, prod_name, order_time, order_status)
        VALUES (#{orderNum}, #{userNum}, #{prodNum}, #{prodName}, #{orderTime}, #{orderStatus})
    </insert>

    <!-- 根据ID更新订单 -->
    <update id="updateById" parameterType="com.belizer.order.entity.Order">
        UPDATE t_order
        <set>
            <if test="orderNum != null and orderNum != ''">
                order_num = #{orderNum},
            </if>
            <if test="userNum != null and userNum != ''">
                user_num = #{userNum},
            </if>
            <if test="prodNum != null and prodNum != ''">
                prod_num = #{prodNum},
            </if>
            <if test="prodName != null and prodName != ''">
                prod_name = #{prodName},
            </if>
            <if test="orderTime != null">
                order_time = #{orderTime},
            </if>
            <if test="orderStatus != null and orderStatus != ''">
                order_status = #{orderStatus},
            </if>
        </set>
        WHERE id = #{id}
    </update>

    <!-- 根据ID删除订单 -->
    <delete id="deleteById" parameterType="long">
        DELETE FROM t_order WHERE id = #{id}
    </delete>

    <!-- 根据ID查询订单 -->
    <select id="selectById" parameterType="long" resultType="com.belizer.order.entity.Order">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_order
        WHERE id = #{id}
    </select>

    <!-- 查询所有订单 -->
    <select id="selectAll" resultType="com.belizer.order.entity.Order">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_order
    </select>

    <!-- 根据订单编号查询订单 -->
    <select id="selectByOrderNum" parameterType="string" resultType="com.belizer.order.entity.Order">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_order
        WHERE order_num = #{orderNum}
    </select>

</mapper>